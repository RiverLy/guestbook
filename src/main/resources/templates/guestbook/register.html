<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layout/basic :: setContent(~{this::content})}">
    <th:block th:fragment="content">
        <h1 class="mt-4">GuestBook Register Page</h1>
        <form th:action="@{/guestbook/register}" th:method="post">

            <div class="form-group">
                <label>Title</label>
                <input type="text" class = "form-control" name="title" placeholder="Enter Title">
            </div>

            <div class="form-group">
                <label>Content</label>
                <textarea id="content-input" class="form-control" rows="5" name="content"></textarea>
            </div>

            <div class="form-group">
                <label>Writer</label>
                <input type="text" class = "form-control" name="writer" placeholder="Enter Writer">
            </div>

            <button type="button" th:onclick="'checkAndSubmit();'" class="btn btn-primary">Submit</button>
        </form>

        <script th:inline="javascript">

            function checkAndSubmit(){

                var title = document.querySelector("input[name='title']").value;
                var content = document.querySelector("#content-input").value;
                var writer = document.querySelector("input[name='writer']").value;

                if(title === undefined || title=== null || title === '' || title.trim().length === 0){
                    alert("제목을 작성해주세요.");
                    return;
                }
                if(content === undefined || content === null || content === '' || content.trim().length === 0){
                    alert("내용을 작성해주세요.");
                    return;
                }
                if(writer === undefined || writer === null || writer === '' || writer.trim().length === 0){
                    alert("작성자를 입력해주세요.");
                    return;
                }

                $("form").submit();
            }

        </script>
    </th:block>
</th:block>
</html>